<div class="container {{Tags}} {{Deck}}">

  <div class="box">

    <fieldset class="box_title">
      <legend></legend>
      {{Front}}
    </fieldset>

    <div class="box_text">
    {{#Answer}}<div>{{Answer}}</div>{{/Answer}}

      <!-- If no Image, keep showing preview, if there is one -->
      {{#Postview}}<div style="display: none">{{/Postview}}
              {{#Preview}}<div class="image_text">{{Preview}}</div>{{/Preview}}
      {{#Postview}}</div>{{/Postview}}

      {{#Postview}}<div class="image_text">{{Postview}}</div>{{/Postview}}

    {{#Description}}<div>{{Description}}</div>{{/Description}}
    </div>

  </div>

  <div class="ctag">
    <div class="css"></div>
    <div class="html"></div>
    <div class="ts"></div>
    <div class="js"></div>
    <div class="py"></div>
    <div class="c"></div>
    <div class="r"></div>
    <div class="sql"></div>
    <div class="jayvee"></div>
    <div class="go"></div>
  </div>

  <div class="roundtag">
    <div class="subdeck">{{Subdeck}}</div>
    <div class="subject"></div>
  </div>

  {{#Questions}}<div class="annotation questions">{{Questions}}</div>{{/Questions}}
  {{#Notes}}<div class="annotation notes">{{Notes}}</div>{{/Notes}}

</div>


<script> /*------------------------ ADJUST CODE WIDTH ------------------*/
function adjustTableFontSize() {
  const tables = document.querySelectorAll('.highlighttable');

  tables.forEach(table => {
    const parentWidth = table.parentElement.offsetWidth;
    const tableWidth = table.offsetWidth;
    const fontSize = parseFloat(window.getComputedStyle(table).fontSize);
    const padding = parseFloat(window.getComputedStyle(table).paddingLeft) + parseFloat(window.getComputedStyle(table).paddingRight);

    if (tableWidth + padding > parentWidth) {
      const newFontSize = fontSize * ((parentWidth - padding) / tableWidth);
      table.style.fontSize = newFontSize + 'px';
    }
  });
}

// Adjust table font size on window resize and page load
window.addEventListener('resize', adjustTableFontSize);
adjustTableFontSize();
</script>

<script> /*------------------------ Randomize Multiple Choice Qs -------*/
  (function () {
    const lists = document.querySelectorAll(".image_text ul");
    lists.forEach((ul) => {
      const items = Array.from(ul.children);
      for (let i = items.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [items[i], items[j]] = [items[j], items[i]];
      }
      ul.innerHTML = "";
      items.forEach((li) => ul.appendChild(li));
    });
  })();
</script>


<script> /*------------------------ Replace Arrow Symbols --------------*/
(function () {
  const replacements = {
    "-->": "➜",
    "<-->": "⟷",
  };

  const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);

  let node;
  while ((node = walker.nextNode())) {
    let text = node.nodeValue;
    if (!text) continue;

    // skip nodes that contain none of the keys
    let changed = false;

    // replace longer patterns first to avoid conflicts
    for (const from of Object.keys(replacements).sort((a, b) => b.length - a.length)) {
      if (text.includes(from)) {
        text = text.split(from).join(replacements[from]);
        changed = true;
      }
    }

    if (changed) node.nodeValue = text;
  }
})();
</script>
