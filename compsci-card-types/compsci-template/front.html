<div class="container {{Tags}} {{Deck}}">

  <div class="box">

    <fieldset class="box_title">
      <legend></legend>
      {{Front}}
    </fieldset>

    {{#Preview}}<div class="box_text"><div class="image_text">{{Preview}}</div></div>{{/Preview}}

  </div>

  <div class="ctag">
    <div class="css"></div>
    <div class="html"></div>
    <div class="ts"></div>
    <div class="js"></div>
    <div class="py"></div>
    <div class="c"></div>
    <div class="r"></div>
    <div class="sql"></div>
    <div class="jayvee"></div>
    <div class="go"></div>
  </div>

  <div class="roundtag">
    <div class="subdeck">{{Subdeck}}</div>
    <div class="subject"></div>
  </div>

</div>


<script> /*------------------------ ADJUST CODE WIDTH ------------------*/
function adjustTableFontSize() {
  const tables = document.querySelectorAll('.highlighttable');

  tables.forEach(table => {
    const parentWidth = table.parentElement.offsetWidth;
    const tableWidth = table.offsetWidth;
    const fontSize = parseFloat(window.getComputedStyle(table).fontSize);
    const padding = parseFloat(window.getComputedStyle(table).paddingLeft) + parseFloat(window.getComputedStyle(table).paddingRight);

    if (tableWidth + padding > parentWidth) {
      const newFontSize = fontSize * ((parentWidth - padding) / tableWidth);
      table.style.fontSize = newFontSize + 'px';
    }
  });
}

// Adjust table font size on window resize and page load
window.addEventListener('resize', adjustTableFontSize);
adjustTableFontSize();
</script>


<script> /*------------------------ ADJUST TITLE SIZE ------------------*/
function adjustBoxTitleFontSize() {
  const el = document.querySelector('.box_title');
  if (!el) return;

  const len = (el.textContent || '').replace(/\s+/g, ' ').trim().length;
  if (len > 150) {
    el.style.fontSize = '100%';
    el.style.padding = '10px';
  }
}

adjustBoxTitleFontSize();
</script>

<script> /*------------------------ Randomize Multiple Choice Qs -------*/
(function () {
  const KEY = "ul_shuffle_order_v1";

  function shuffleAndStore(ul) {
    const items = Array.from(ul.children);
    const order = items.map((_, i) => i);

    for (let i = order.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [order[i], order[j]] = [order[j], order[i]];
    }

    ul.innerHTML = "";
    order.forEach(i => ul.appendChild(items[i]));
    sessionStorage.setItem(KEY, JSON.stringify(order));
  }

  function waitForUl() {
    const ul = document.querySelector(".image_text ul");
    if (ul) shuffleAndStore(ul);
    else requestAnimationFrame(waitForUl);
  }

  waitForUl();
})();
</script>
